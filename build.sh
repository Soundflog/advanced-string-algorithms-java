#!/bin/bash
# Скрипт для автоматической сборки Maven-проекта
# Лабораторная работа №6: Знакомство с инструментами автоматизации сборки проектов Apache Maven

echo "Запуск очистки предыдущих сборок..."
mvn clean

echo "Сборка проекта..."
mvn package

# Проверка кода возврата команды Maven
if [ $? -eq 0 ]; then
    echo "Сборка завершена успешно!"
    # Поиск созданного JAR-артефакта в каталоге target
    jar_file=$(find target -maxdepth 1 -name "*.jar" | head -n 1)
    if [ -n "$jar_file" ]; then
        echo "Найден артефакт: $jar_file"
    else
        echo "JAR-артефакт не найден в target. Проверьте конфигурацию сборки."
    fi
else
    echo "Ошибка сборки. Проверьте вывод Maven для получения дополнительной информации."
    exit 1
fi
read -p "Нажмите Enter, чтобы продолжить ..."
